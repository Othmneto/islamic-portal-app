<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Push Notifications — Admin (Cookie Auth)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; margin: 24px; }
    .card { max-width: 780px; border: 1px solid #ddd; border-radius: 12px; padding: 20px; }
    .row { margin: 10px 0; }
    button { padding: 10px 14px; border-radius: 8px; border: 1px solid #333; cursor: pointer; }
    code { background: #f6f8fa; padding: 2px 6px; border-radius: 6px; }
    .ok { color: #0a7a2f; } .warn { color: #b34a00; } .err { color: #b00020; }
    .mono { font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace; white-space: pre-wrap; }
    .list { background: #fafafa; border: 1px solid #eee; padding: 10px; border-radius: 8px; max-height: 220px; overflow: auto; }
  </style>
</head>
<body>
  <h1>Push Notifications — Admin (Cookie Auth)</h1>
  <div class="card">
    <div class="row">Service Worker: <span id="swStatus">checking…</span></div>
    <div class="row">Subscription: <span id="subStatus">checking…</span></div>

    <div class="row">
      <button id="btnSubscribe">Subscribe / Re-subscribe</button>
      <button id="btnUnsub">Unsubscribe</button>
      <button id="btnTest">Send Test Notification</button>
      <button id="btnList">Refresh Subscriptions</button>
    </div>

    <div class="row mono" id="log"></div>
    <h3>Saved Subscriptions</h3>
    <div id="subs" class="list mono">—</div>
  </div>

  <!-- External scripts only (CSP-friendly) -->
  <script src="/push-client.js?v=3" defer></script>
  <script src="/admin.js?v=1" defer></script>
</body>
</html>
